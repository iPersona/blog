<template>
  <div>
    <b-btn
      block
      variant="outline-success"
      @click="editWithStackedit"
    >Edit with Stackedit</b-btn>
    <b-form-textarea
      id="editor"
      v-model="text"
      placeholder="Enter something"
    >
    </b-form-textarea>
    <!-- <textarea id="editor"></textarea> -->
  </div>
</template>
<script>
  import Stackedit from 'stackedit-js';

  export default {
    name: "Home",
    components: {},
    data() {
      return {
        text: ''
      }
    },
    mounted() {
      this.editWithStackedit();
    },
    methods: {
      editWithStackedit() {
        // this.$nextTick(function () {
        // Get the textarea.
        const el = document.getElementById('editor');
        // console.log("el: " + JSON.stringify(el));

        // Create the Stackedit object.
        const stackedit = new Stackedit();

        // Open the iframe
        stackedit.openFile({
          name: 'unnamed', // with a filename
          content: {
            text: el.value // and the Markdown content.
          }
        });

        // Listen to StackEdit events and apply the changes to the textarea.
        stackedit.on('fileChange', (file) => {
          // el.value = file.content.text;
          this.text = file.content.text;
        });
        // });
      },

    }
  }
</script>

